class PolyStorage{"use strict";static async get(t,e=null){return new Promise((o=>{if("undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local)chrome.storage.local.get([t],(n=>{o(void 0!==n[t]?n[t]:e)}));else{const n=localStorage.getItem(t);o(n?JSON.parse(n):e)}}))}static async set(t,e){return new Promise((o=>{"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local?chrome.storage.local.set({[t]:e},(()=>{o(!0)})):(localStorage.setItem(t,JSON.stringify(e)),o(!0))}))}static async remove(t){return new Promise((e=>{"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local?chrome.storage.local.remove([t],(()=>{e(!0)})):(localStorage.removeItem(t),e(!0))}))}static async clear(){return new Promise((t=>{"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local?chrome.storage.local.clear((()=>{t(!0)})):(localStorage.clear(),t(!0))}))}}class PolySettings{"use strict";static STORAGE_KEY="poly_metrics_settings";static defaultSettings={defaultTax:20,defaultCurrency:"VND",toggleState:"closed",currencies:[{code:"USD",name:"US Dollar",symbol:"$",rate:1},{code:"VND",name:"Vietnamese Dong",symbol:"‚Ç´",rate:23e3},{code:"EUR",name:"Euro",symbol:"‚Ç¨",rate:.92},{code:"GBP",name:"British Pound",symbol:"¬£",rate:.79},{code:"JPY",name:"Japanese Yen",symbol:"¬•",rate:149.5},{code:"CNY",name:"Chinese Yuan",symbol:"¬•",rate:7.24},{code:"INR",name:"Indian Rupee",symbol:"‚Çπ",rate:83.12},{code:"BRL",name:"Brazilian Real",symbol:"R$",rate:4.97},{code:"AUD",name:"Australian Dollar",symbol:"A$",rate:1.53},{code:"CAD",name:"Canadian Dollar",symbol:"C$",rate:1.38},{code:"CHF",name:"Swiss Franc",symbol:"CHF",rate:.88},{code:"SGD",name:"Singapore Dollar",symbol:"S$",rate:1.34},{code:"HKD",name:"Hong Kong Dollar",symbol:"HK$",rate:7.83},{code:"KRW",name:"South Korean Won",symbol:"‚Ç©",rate:1320.5},{code:"MXN",name:"Mexican Peso",symbol:"Mex$",rate:17.15},{code:"RUB",name:"Russian Ruble",symbol:"‚ÇΩ",rate:92.5},{code:"THB",name:"Thai Baht",symbol:"‡∏ø",rate:34.85}]};static async load(){const t=await PolyStorage.get(this.STORAGE_KEY,this.defaultSettings);return{...this.defaultSettings,...t}}static async save(t){return await PolyStorage.set(this.STORAGE_KEY,t)}static async getCurrency(t){const e=await this.load();return e.currencies.find((e=>e.code===t))||e.currencies[0]}static async getCurrencies(){return(await this.load()).currencies}static async updateCurrency(t){const e=await this.load(),o=e.currencies.findIndex((e=>e.code===t.code));return o>=0?e.currencies[o]=t:e.currencies.push(t),await this.save(e),e}static async removeCurrency(t){const e=await this.load();return e.currencies=e.currencies.filter((e=>e.code!==t)),await this.save(e),e}static async reset(){return await PolyStorage.remove(this.STORAGE_KEY),this.defaultSettings}static async saveToggleState(t){const e=await this.load();e.toggleState=t,await this.save(e)}static async getToggleState(){return(await this.load()).toggleState||"closed"}static getQuickLinksKey(t){return`quicklinks_${new URL(t).pathname.replace(/\//g,"_")}`}static async getQuickLinks(t=window.location.href){const e=this.getQuickLinksKey(t);return await PolyStorage.get(e,[])}static async saveQuickLinks(t,e=window.location.href){const o=this.getQuickLinksKey(e);return await PolyStorage.set(o,t)}static async addQuickLink(t,e=window.location.href){const o=this.getQuickLinksKey(e),n=await PolyStorage.get(o,[]);return n.push(t),await PolyStorage.set(o,n)}static async removeQuickLink(t,e=window.location.href){const o=this.getQuickLinksKey(e),n=await PolyStorage.get(o,[]);n&&n[t]&&(n.splice(t,1),await PolyStorage.set(o,n))}}class PolyEnvato{"use strict";static validTimeFrame=[[[6,7],[1,2]],[[1,2],[4,5]]];static authorFee=[55,[[0,37.5],[3750,36.25],[7500,35],[11250,33.75],[15e3,32.5],[18750,31.25],[22500,30],[26250,28.75],[3e4,27.5],[33750,26.25],[37500,25],[41250,23.75],[45e3,22.5],[48750,21.25],[52500,20],[56250,18.75],[6e4,17.5],[63750,16.25],[67500,15],[71250,13.75],[75e3,12.5]]];static initTools=async()=>{const t=await PolySettings.load(),e=$(".item-header__details-section");let o="";t.currencies.forEach((e=>{const n=e.code===t.defaultCurrency?"selected":"";o+=`<option value="${e.code}" data-rate="${e.rate}" ${n}>${e.code} (${e.symbol})</option>`}));const n=`\n            <div class="poly-toolsbar">\n                <div class="poly-toolbar-row">\n                    <div class="poly-toolbar-item">\n                        <label>TAX:</label>\n                        <input id="poly-tax" type="text" value="${t.defaultTax}">%\n                        <span style="font-size:10px">Corporate/Personal income tax rate</span>\n                    </div>\n                    <div class="poly-toolbar-item">\n                        <label>Currency:</label>\n                        <select id="poly-currency">${o}</select>\n                    </div>\n                    <div class="poly-toolbar-item">\n                        <label>Exchange Rate:</label>\n                        <input id="poly-exchange-rate" type="number" step="0.01" value="${t.currencies.find((e=>e.code===t.defaultCurrency)).rate}" readonly>\n                        <span id="poly-currency-symbol"></span>\n                    </div>\n                    <div class="poly-toolbar-item">\n                        <button id="poly-quicklinks-btn" title="Quick Links">üîó</button>\n                        <button id="poly-settings-btn" title="Settings">‚öôÔ∏è</button>\n                    </div>\n                </div>\n                <div id="poly-quicklinks-display"></div>\n                <div id="poly-chart-container">\n                    <div class="poly-chart-row">\n                        <div class="poly-chart-col">\n                            <div class="poly-chart-header">\n                                <h4 class="poly-chart-title">Revenue Breakdown</h4>\n                                <select id="poly-chart-type" class="poly-chart-type-select">\n                                    <option value="bar">Bar Chart</option>\n                                    <option value="line">Line Chart</option>\n                                    <option value="radar">Radar Chart</option>\n                                    <option value="polarArea">Polar Area</option>\n                                </select>\n                            </div>\n                            <canvas id="poly-revenue-chart"></canvas>\n                        </div>\n                        <div class="poly-chart-col">\n                            <h4 class="poly-chart-title">Revenue Distribution (%)</h4>\n                            <canvas id="poly-pie-chart"></canvas>\n                        </div>\n                    </div>\n                </div>\n            </div>`;e.append(n),PolyEnvato.updateCurrencySymbol(),$("#poly-tax").on("input",(function(){const t=$(this).val().replace(/[^0-9]/g,"");PolyEnvato.aggregateCalculations(t)})),$("#poly-currency").on("change",(async function(){const t=$(this).find("option:selected").data("rate");$("#poly-exchange-rate").val(t),PolyEnvato.updateCurrencySymbol();const e=await PolySettings.load();e.defaultCurrency=$(this).val(),await PolySettings.save(e);const o=$("#poly-tax").val();PolyEnvato.aggregateCalculations(o)})),$("#poly-tax").on("input",(function(){let t=$(this).val().replace(/[^0-9]/g,"");t>100&&(t=100),t<0&&(t=0),$(this).val(t)})),$("#poly-settings-btn").on("click",(()=>{PolyEnvato.openSettingsModal()})),$("#poly-quicklinks-btn").on("click",(()=>{PolyEnvato.openQuickLinksModal()})),$(document).on("change","#poly-chart-type",(function(){const t=$("#poly-tax").val();PolyEnvato.aggregateCalculations(t)})),PolyEnvato.renderQuickLinks(),setTimeout((()=>{const e=$("#poly-tax").val()||t.defaultTax;PolyEnvato.aggregateCalculations(e)}),300)};static updateCurrencySymbol=()=>{$("#poly-currency").val();const t=$("#poly-currency").find("option:selected").text().match(/\((.*?)\)/);$("#poly-currency-symbol").text(t?t[1]:"$")};static aggregateCalculations=(t=20)=>{$(".poly-elements").remove();const e=PolyEnvato.stripHtmlTags($(".js-condense-item-page-info-panel--last_update time.updated").html());let o=PolyEnvato.stripHtmlTags($(".js-condense-item-page-info-panel--created-at td.meta-attributes__attr-detail").html());o||(o=PolyEnvato.stripHtmlTags($('.meta-attributes__table tr:contains("Published") td.meta-attributes__attr-detail').html()));const n=PolyEnvato.parseRelativeTimeToDate(o),a=PolyEnvato.calculateDaysBetweenDates(n,e),l=PolyEnvato.daysSinceDate(e),s=PolyEnvato.daysSinceDate(e)/30,i=PolyEnvato.daysSinceDate(e)/30/12,r=`<div>It's been <span class="poly-no poly-no-days-since">${PolyEnvato.customFormatNumber(l)} days ~ ${PolyEnvato.customFormatNumber(s)} months ~ ${PolyEnvato.customFormatNumber(i,",",".",2)} years</span> since the last version update.</div>`,c=PolyEnvato.convertToPlainNumber(PolyEnvato.extractNumbers($(".js-purchase-price").html())),d=PolyEnvato.convertToPlainNumber($(".item-header__sales-count strong").html()),u=PolyEnvato.convertToPlainNumber(a),p=PolyEnvato.customFormatNumber(d/(u/30),",",".",2),y=PolyEnvato.customFormatNumber(d/u,",",".",2),m=$(".item-header__details-section"),v=`<div class="poly-header-info">\n            <div class="poly-date-info"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-check-fill" viewBox="0 0 16 16">\n            <path d="M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v1h16V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4zM16 14V5H0v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2m-5.146-5.146-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708"/>\n        </svg>&nbsp;${a} days from ${n} to ${e}.</div>\n            ${r}\n        </div>`,h=parseFloat($("#poly-exchange-rate").val())||23e3,g=($("#poly-currency").val(),$("#poly-currency-symbol").text()||"‚Ç´"),b=PolyEnvato.authorFee[1],f=c-5,k=c*d,w=5*d,P={value:[],bind:"",totals_author_fee:0,totals_profit:0};PolyEnvato.calculationRevenue(f,d,P);const x=P.totals_profit,S=`${b[b.length-1][1]}% - ${b[0][1]}%`,T=`\n            <table class="poly-table">\n                <thead>\n                    <tr>\n                        <td>Price Level</td>\n                        <td>Author Fee %</td>\n                        <td>Author Fee</td>\n                        <td>Profit</td>\n                        <td>Sales target</td>\n                    </tr>\n                </thead>\n                <tbody>${P.bind}</tbody>\n            </table>`,E=`\n            <div>Without author fee, buyer fee</div>\n            <div class="poly-fee-block poly-collapsible">\n                <div class="poly-toggle-btn" title="Toggle detailed statistics"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="poly-toggle-icon" viewBox="0 0 16 16">\n            <path d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n        </svg></div>\n                <div>Total buyer fee: $${PolyEnvato.customFormatNumber(w)} ($5/ item ~${PolyEnvato.customFormatNumber(5*h)}${g})</div>\n                <div>Total author fee: $${PolyEnvato.customFormatNumber(P.totals_author_fee,",",".",2)} (${S})</div>\n                ${T}\n            </div>`,C=t,F=C*x/100,D=x-F,N=f-f*b[b.length-1][1]/100,R=f-f*b[0][1]/100,_=`\n            <table class="poly-table">\n                <thead>\n                    <tr>\n                        <td>Sales</td>\n                        <td>Price</td>\n                        <td>Revenue without fee & TAX</td>\n                        <td class="poly-table-profit">Profit before TAX</td>\n                        <td>Avg days</td>\n                        <td>Avg month</td>\n                        <td>TAX ${C}%</td>\n                        <td>Profit after TAX</td>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>${PolyEnvato.customFormatNumber(d)}</td>\n                        <td>\n                            <div class="poly-fee-block">\n                                <div>Sale price: <span class="poly-no">$${PolyEnvato.customFormatNumber(c,",",".",2)}</span></div>\n                                <div>Profit price from <span class="poly-no">$${PolyEnvato.customFormatNumber(R,",",".",2)}</span> to <span class="poly-no">$${PolyEnvato.customFormatNumber(N,",",".",2)}</span></div>\n                            </div>\n                        </td>\n                        <td><span class="poly-no">$${PolyEnvato.customFormatNumber(k)}</span></td>\n                        <td>\n                            <span class="poly-no">$${PolyEnvato.customFormatNumber(x)}</span>\n                            <div>${E}</div>\n                        </td>\n                        <td>${y}</td>\n                        <td>${p}</td>\n                        <td class="poly-with-fix"><span class="poly-no">$${PolyEnvato.customFormatNumber(F)}</span> ~${PolyEnvato.customFormatNumber(F*h)}${g}</td>\n                        <td class="poly-with-fix"><span class="poly-no poly-no-profit">$${PolyEnvato.customFormatNumber(D)}</span> ~${PolyEnvato.customFormatNumber(D*h)}${g}</td>\n                    </tr>\n                </tbody>\n            </table>`;m.after(`<div class="poly-elements">${v}${_}</div>`),PolyEnvato.initChart({revenue:k,profitBeforeTax:x,tax:F,profitAfterTax:D}),PolyEnvato.initToggle()};static initToggle=async()=>{const t=(await PolySettings.load()).toggleState||"closed";setTimeout((()=>{const e=jQuery(".poly-fee-block table"),o=(jQuery(".poly-toggle-btn"),jQuery(".poly-toggle-btn svg"));"closed"===t?(e.css("display","none"),o.removeClass("poly-rotated")):(e.css("display","table"),o.addClass("poly-rotated")),jQuery(document).off("click",".poly-toggle-btn"),jQuery(document).on("click",".poly-toggle-btn",(function(t){t.preventDefault(),t.stopPropagation();const e=jQuery(this),o=e.find("svg"),n=e.parent(".poly-fee-block");if(0===n.length)return;const a=n.find("table");if(a.length>0){a.is(":visible")?(a.css("display","none"),o.removeClass("poly-rotated"),PolySettings.saveToggleState("closed")):(a.css("display","table"),o.addClass("poly-rotated"),PolySettings.saveToggleState("open"))}}))}),500)};static updateClock=t=>{setInterval((()=>{const e=PolyEnvato.getCountryTime(t),o=PolyEnvato.canSendEmailNow(t);$("#poly-lock").html(e),$("#poly-can-send").html(o?`The current time frame in ${t} is appropriate; you can send the email now.`:`The current time frame in ${t} is not appropriate; you should send the email later.`)}),1e3)};static removeWordsFromString=(t,e)=>{const o=`\\b(${e.join("|")})\\b`,n=new RegExp(o,"gi");return t.replace(n,"").replace(/\s+/g," ").trim()};static capitalizeFirstLetter=t=>t.replace(/\b\w/g,(t=>t.toUpperCase()));static stripHtmlTags=t=>$("<div>").html(t).text().trim();static parseRelativeTimeToDate=t=>{const e=t.trim().match(/(\d+)\s+(year|month|day)s?\s+ago/i);if(!e)return t;const o=parseInt(e[1]),n=e[2].toLowerCase(),a=new Date;let l;if("year"===n){const t=a.getFullYear()-o;l=new Date(t,0,1)}else if("month"===n){const t=a.getMonth()-o,e=a.getFullYear()+Math.floor(t/12);l=new Date(e,(t%12+12)%12,1)}else"day"===n&&(l=new Date(a),l.setDate(a.getDate()-o));return`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`};static daysSinceDate=t=>{const e=new Date-new Date(t);return Math.round(e/864e5)};static calculateDaysBetweenDates=(t,e)=>Math.round((new Date(e)-new Date(t))/864e5).toLocaleString();static convertToPlainNumber=(t=0)=>("string"!=typeof t&&(t=String(t)),parseInt(t.replace(/[,\.]/g,""),10));static customFormatNumber=(t,e=",",o=".",n=0)=>{const a=t.toFixed(n).split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),a.join(o)};static extractNumbers=t=>parseFloat((t||"").replace(/[^0-9.]/g,""));static calculationRevenue=(t,e,o)=>{let n=t*e,a=n;const l=PolyEnvato.authorFee[1];let s=0,i=0;for(let e=0;e<l.length;e++){const[r,c]=l[e],d=c/100,u=e+1<l.length?l[e+1][0]:n,p=Math.min(a,u-r),y=p/t,m=p*(1-d);s+=m,a-=p;const v=p*d;i+=v;const h=p*e;if(o.value.push({revenue:h,profit:m,author_fee:v,sales_target:y,percent:c}),o.bind+=`\n                <tr>\n                    <td>$${PolyEnvato.customFormatNumber(h)}</td>\n                    <td>${c}%</td>\n                    <td>$${PolyEnvato.customFormatNumber(v,",",".",2)}</td>\n                    <td>$${PolyEnvato.customFormatNumber(m,",",".",2)}</td>\n                    <td>${PolyEnvato.customFormatNumber(y,",",".",2)}</td>\n                </tr>`,a<=0)break}return o.totals_author_fee=i,o.totals_profit=s,o};static openSettingsModal=async()=>{const t=await PolySettings.load();let e="";t.currencies.forEach(((t,o)=>{e+=`\n                <tr data-index="${o}">\n                    <td><input type="text" class="currency-code" value="${t.code}" ${o<2?"readonly":""}></td>\n                    <td><input type="text" class="currency-name" value="${t.name}"></td>\n                    <td><input type="text" class="currency-symbol" value="${t.symbol}"></td>\n                    <td><input type="number" class="currency-rate" value="${t.rate}" step="0.01"></td>\n                    <td>${o<2?"":'<button class="poly-btn-remove" data-code="'+t.code+'">‚úï</button>'}</td>\n                </tr>`}));const o=`\n            <div id="poly-settings-modal" class="poly-modal">\n                <div class="poly-modal-content">\n                    <div class="poly-modal-header">\n                        <h3>‚öôÔ∏è Settings</h3>\n                        <span class="poly-modal-close">&times;</span>\n                    </div>\n                    <div class="poly-modal-body">\n                        <div class="poly-settings-section">\n                            <label>Default Tax Rate (%):</label>\n                            <input type="number" id="settings-tax" value="${t.defaultTax}" min="0" max="100">\n                        </div>\n                        \n                        <div class="poly-settings-section">\n                            <label>Default Currency:</label>\n                            <select id="settings-default-currency">\n                                ${t.currencies.map((e=>`<option value="${e.code}" ${e.code===t.defaultCurrency?"selected":""}>${e.code}</option>`)).join("")}\n                            </select>\n                        </div>\n                        \n                        <div class="poly-settings-section">\n                            <h4>Currencies & Exchange Rates</h4>\n                            <table class="poly-settings-table">\n                                <thead>\n                                    <tr>\n                                        <th>Code</th>\n                                        <th>Name</th>\n                                        <th>Symbol</th>\n                                        <th>Rate (to USD)</th>\n                                        <th>Action</th>\n                                    </tr>\n                                </thead>\n                                <tbody id="currencies-list">\n                                    ${e}\n                                </tbody>\n                            </table>\n                            <button id="add-currency-btn" class="poly-btn">+ Add Currency</button>\n                        </div>\n                    </div>\n                    <div class="poly-modal-footer">\n                        <button id="poly-save-settings" class="poly-btn poly-btn-primary">Save</button>\n                        <button id="poly-reset-settings" class="poly-btn poly-btn-secondary">Reset to Default</button>\n                        <button class="poly-btn poly-modal-close">Cancel</button>\n                    </div>\n                </div>\n            </div>`;$("#poly-settings-modal").remove(),$("body").append(o),setTimeout((()=>{$("#poly-settings-modal").addClass("poly-modal-show")}),10),$(".poly-modal-close").on("click",(()=>{$("#poly-settings-modal").removeClass("poly-modal-show"),setTimeout((()=>{$("#poly-settings-modal").remove()}),300)})),$("#add-currency-btn").on("click",(()=>{$("#currencies-list").append('\n                <tr data-index="new">\n                    <td><input type="text" class="currency-code" value="" placeholder="CODE"></td>\n                    <td><input type="text" class="currency-name" value="" placeholder="Name"></td>\n                    <td><input type="text" class="currency-symbol" value="" placeholder="$"></td>\n                    <td><input type="number" class="currency-rate" value="1" step="0.01"></td>\n                    <td><button class="poly-btn-remove-new">‚úï</button></td>\n                </tr>')})),$(document).on("click",".poly-btn-remove",(async function(){const t=$(this).data("code");confirm(`Remove ${t} currency?`)&&$(this).closest("tr").remove()})),$(document).on("click",".poly-btn-remove-new",(function(){$(this).closest("tr").remove()})),$(document).on("input",".currency-rate, #settings-tax",(function(){let t=$(this).val();t=t.replace(/[^\d.]/g,"");const e=t.split(".");e.length>2&&(t=e[0]+"."+e.slice(1).join("")),$(this).val(t)})),$("#poly-save-settings").on("click",(async()=>{const t={defaultTax:parseFloat($("#settings-tax").val())||20,defaultCurrency:$("#settings-default-currency").val(),currencies:[]};t.defaultTax<0&&(t.defaultTax=0),t.defaultTax>100&&(t.defaultTax=100),$("#currencies-list tr").each((function(){const e=$(this).find(".currency-code").val().trim().toUpperCase(),o=$(this).find(".currency-name").val().trim(),n=$(this).find(".currency-symbol").val().trim();let a=parseFloat($(this).find(".currency-rate").val());(isNaN(a)||a<=0)&&(a=1),e&&o&&n&&t.currencies.push({code:e,name:o,symbol:n,rate:a})})),t.currencies.length>0?(await PolySettings.save(t),alert("Settings saved successfully!"),$("#poly-settings-modal").removeClass("poly-modal-show"),setTimeout((()=>{$("#poly-settings-modal").remove(),location.reload()}),300)):alert("Please add at least one currency!")})),$("#poly-reset-settings").on("click",(async()=>{confirm("Reset all settings to default?")&&(await PolySettings.reset(),alert("Settings reset successfully!"),location.reload())}))};static openQuickLinksModal=async()=>{const t=window.location.href,e=await PolySettings.getQuickLinks(t);let o="";e.forEach(((t,e)=>{o+=`\n                <tr data-index="${e}">\n                    <td><input type="text" class="link-text" value="${t.text}" placeholder="Anchor text"></td>\n                    <td><input type="url" class="link-url" value="${t.url}" placeholder="https://example.com"></td>\n                    <td>\n                        <button class="poly-btn-link-view" data-url="${t.url}" title="Open link">üëÅÔ∏è</button>\n                        <button class="poly-btn-link-remove" data-index="${e}" title="Remove">‚úï</button>\n                    </td>\n                </tr>`}));const n=`\n            <div id="poly-quicklinks-modal" class="poly-modal">\n                <div class="poly-modal-content poly-modal-small">\n                    <div class="poly-modal-header">\n                        <h3>üîó Quick Links</h3>\n                        <span class="poly-modal-close">&times;</span>\n                    </div>\n                    <div class="poly-modal-body">\n                        <div class="poly-settings-section">\n                            <p style="font-size: 12px; color: #666; margin-bottom: 8px;">Manage quick links for this product page.</p>\n                            <p style="font-size: 11px; color: #999; margin-bottom: 12px;">Page: ${t}</p>\n                            <table class="poly-settings-table">\n                                <thead>\n                                    <tr>\n                                        <th>Anchor Text</th>\n                                        <th>URL</th>\n                                        <th>Actions</th>\n                                    </tr>\n                                </thead>\n                                <tbody id="quicklinks-list">\n                                    ${o}\n                                </tbody>\n                            </table>\n                            <button id="add-quicklink-btn" class="poly-btn">+ Add Quick Link</button>\n                        </div>\n                    </div>\n                    <div class="poly-modal-footer">\n                        <button id="poly-save-quicklinks" class="poly-btn poly-btn-primary">Save</button>\n                        <button class="poly-btn poly-modal-close">Cancel</button>\n                    </div>\n                </div>\n            </div>`;$("#poly-quicklinks-modal").remove(),$("body").append(n),setTimeout((()=>{$("#poly-quicklinks-modal").addClass("poly-modal-show")}),10),$(".poly-modal-close").on("click",(()=>{$("#poly-quicklinks-modal").removeClass("poly-modal-show"),setTimeout((()=>{$("#poly-quicklinks-modal").remove()}),300)})),$("#add-quicklink-btn").on("click",(()=>{$("#quicklinks-list").append('\n                <tr data-index="new">\n                    <td><input type="text" class="link-text" value="" placeholder="Anchor text"></td>\n                    <td><input type="url" class="link-url" value="" placeholder="https://example.com"></td>\n                    <td><button class="poly-btn-link-remove-new" title="Remove">‚úï</button></td>\n                </tr>')})),$(document).on("click",".poly-btn-link-view",(function(t){t.preventDefault();const e=$(this).data("url");e&&window.open(e,"_blank")})),$(document).on("click",".poly-btn-link-remove",(function(){confirm("Remove this link?")&&$(this).closest("tr").remove()})),$(document).on("click",".poly-btn-link-remove-new",(function(){$(this).closest("tr").remove()})),$("#poly-save-quicklinks").on("click",(async()=>{const e=[];$("#quicklinks-list tr").each((function(){const t=$(this).find(".link-text").val().trim(),o=$(this).find(".link-url").val().trim();t&&o&&e.push({text:t,url:o})})),await PolySettings.saveQuickLinks(e,t),alert("Quick Links saved successfully!"),$("#poly-quicklinks-modal").removeClass("poly-modal-show"),setTimeout((()=>{$("#poly-quicklinks-modal").remove(),PolyEnvato.renderQuickLinks()}),300)}))};static renderQuickLinks=async()=>{const t=window.location.href,e=await PolySettings.getQuickLinks(t),o=$("#poly-quicklinks-display");if(0===e.length)return void o.html("");let n='<div class="poly-quicklinks-container">';n+='<span class="poly-quicklinks-label">Quick Links:</span>',e.forEach(((t,e)=>{n+=`<a href="${t.url}" target="_blank" class="poly-quicklink" title="${t.url}">${t.text}</a>`})),n+="</div>",o.html(n)};static setupEditPageLayout=()=>{const t=jQuery('div[data-view="editItemForm"]');if(0===t.length)return;const e=t.closest(".content"),o=e.closest(".grid-container");if(0===o.length||0===e.length)return;if(o.find(".polymetrics-editor").length>0)return;o.addClass("poly-edit-layout");const n=jQuery('<div class="polymetrics-editor"></div>');n.html('\n            <div class="polymetrics-editor-header">\n                <h3>üìù Description Preview</h3>\n                <p>Live preview of item description</p>\n            </div>\n            <div class="polymetrics-editor-content" id="polymetrics-preview">\n                <div class="polymetrics-loading">Loading preview...</div>\n            </div>\n        '),e.after(n);const a=jQuery(".horizontal-form .inputs").first();a.length>0&&a.css("width","100%"),PolyEnvato.setupDescriptionPreview()};static setupDescriptionPreview=()=>{const t=jQuery("textarea#description"),e=jQuery("#polymetrics-preview");if(0===t.length)return void e.html('<p style="color: #999;">Description textarea not found</p>');const o=()=>{const e=t[0];e.style.height="auto",e.style.height=e.scrollHeight+"px"},n=()=>{const o=t.val();if(!o||""===o.trim())return void e.html('<p style="color: #999; font-style: italic;">No content to preview...</p>');const n=`\n                <div class="polymetrics-preview-wrapper">\n                    ${(t=>{if(!t)return"";let e=t;return e=e.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),e=e.replace(/__([^_]+)__/g,"<strong>$1</strong>"),e=e.replace(/\*([^*<>]+)\*/g,"<em>$1</em>"),e=e.replace(/^### (.+?)$/gm,"<h3>$1</h3>"),e=e.replace(/^## (.+?)$/gm,"<h2>$1</h2>"),e=e.replace(/^# (.+?)$/gm,"<h1>$1</h1>"),e=e.replace(/```([^`]+)```/g,"<pre><code>$1</code></pre>"),e=e.replace(/`([^`]+)`/g,"<code>$1</code>"),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),e=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" />'),e})(o)}\n                </div>\n            `;e.html(n)};let a;n(),o(),t.on("input",(function(){o(),clearTimeout(a),a=setTimeout((()=>{n()}),500)})),t.on("keyup",(function(){clearTimeout(a),a=setTimeout((()=>{n()}),300)})),t.on("change",(function(){n(),o()})),jQuery(window).on("resize",(()=>{o()}))};static initChart=t=>{const e=$("#poly-revenue-chart"),o=$("#poly-pie-chart");if(0===e.length||"undefined"==typeof Chart)return;window.polyBarChartInstance&&window.polyBarChartInstance.destroy(),window.polyPieChartInstance&&window.polyPieChartInstance.destroy();const n=$("#poly-chart-type").val()||"bar",a=e[0].getContext("2d"),l={type:n,data:{labels:["Revenue","Profit Before Tax","Tax","Profit After Tax"],datasets:[{label:"Amount (USD)",data:[t.revenue,t.profitBeforeTax,t.tax,t.profitAfterTax],backgroundColor:["rgba(102, 126, 234, 0.7)","rgba(75, 192, 192, 0.7)","rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)"],borderColor:["rgba(102, 126, 234, 1)","rgba(75, 192, 192, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:"line"===n?2:1,fill:"line"!==n,tension:"line"===n?.4:0}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,scales:"radar"!==n&&"polarArea"!==n?{y:{beginAtZero:!0,ticks:{callback:function(t){return"$"+t.toLocaleString()}}}}:{r:{beginAtZero:!0,ticks:{callback:function(t){return"$"+t.toLocaleString()}}}},plugins:{legend:{display:"radar"===n||"polarArea"===n},tooltip:{callbacks:{label:function(t){return(t.label||"")+": "+("$"+(t.parsed.y||t.parsed.r||t.parsed).toLocaleString())}}}}}};if(window.polyBarChartInstance=new Chart(a,l),o.length>0){const e=t.revenue,n=((t.profitBeforeTax/e*100).toFixed(1),(t.tax/e*100).toFixed(1)),a=(t.profitAfterTax/e*100).toFixed(1),l=((e-t.profitBeforeTax)/e*100).toFixed(1),s=o[0].getContext("2d");window.polyPieChartInstance=new Chart(s,{type:"pie",data:{labels:[`Net Profit (${a}%)`,`Tax (${n}%)`,`Fees (${l}%)`],datasets:[{data:[t.profitAfterTax,t.tax,e-t.profitBeforeTax],backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 159, 64, 0.8)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 159, 64, 1)"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1.5,plugins:{legend:{position:"bottom",labels:{padding:12,font:{size:11}}},tooltip:{callbacks:{label:function(t){return(t.label||"")+": "+("$"+t.parsed.toLocaleString())}}}}}})}}}class PolyOperationFunctions{"use strict";static ScrollToTop=(t,e="")=>{t.forEach((t=>{$(t).css({display:"inline-block"}),$(document).on("click",t,(function(){PolyOperationFunctions.Scrolling(e)}))}))};static Scrolling=(t="")=>{let e=0;if(t){const o=document.querySelector(t);o&&(e=o.offsetTop)}window.scrollTo({top:e,behavior:"smooth"})};static ScrollToBottom=t=>{t.forEach((t=>{$(t).css({display:"inline-block"}),$(document).on("click",t,(function(){PolyOperationFunctions.ScrollingToBottom()}))}))};static ScrollingToBottom=()=>{const t=document.documentElement.scrollHeight;window.scrollTo({top:t,behavior:"smooth"})};static AnchorsToObjects=(t=".is-hidden-tablet-and-below.page-tabs ul li a")=>$(t).map((function(){let t=$(this).find("span:first").text();return{link:$(this).attr("href"),text:t||$(this).text()}})).get()}